{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport Cookies from 'universal-cookie';\nimport { browserOrNode } from '../JS';\nvar isBrowser = browserOrNode().isBrowser;\nvar ONE_YEAR_IN_MS = 365 * 24 * 60 * 60 * 1000;\nvar UniversalStorage = /** @class */function () {\n  function UniversalStorage(context) {\n    if (context === void 0) {\n      context = {};\n    }\n    this.cookies = new Cookies();\n    this.store = isBrowser ? window.localStorage : Object.create(null);\n    this.cookies = context.req ? new Cookies(context.req.headers.cookie) : new Cookies();\n    Object.assign(this.store, this.cookies.getAll());\n  }\n  Object.defineProperty(UniversalStorage.prototype, \"length\", {\n    get: function () {\n      return Object.entries(this.store).length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  UniversalStorage.prototype.clear = function () {\n    var _this = this;\n    Array.from(new Array(this.length)).map(function (_, i) {\n      return _this.key(i);\n    }).forEach(function (key) {\n      return _this.removeItem(key);\n    });\n  };\n  UniversalStorage.prototype.getItem = function (key) {\n    return this.getLocalItem(key);\n  };\n  UniversalStorage.prototype.getLocalItem = function (key) {\n    return Object.prototype.hasOwnProperty.call(this.store, key) ? this.store[key] : null;\n  };\n  UniversalStorage.prototype.getUniversalItem = function (key) {\n    return this.cookies.get(key);\n  };\n  UniversalStorage.prototype.key = function (index) {\n    return Object.keys(this.store)[index];\n  };\n  UniversalStorage.prototype.removeItem = function (key) {\n    this.removeLocalItem(key);\n    this.removeUniversalItem(key);\n  };\n  UniversalStorage.prototype.removeLocalItem = function (key) {\n    delete this.store[key];\n  };\n  UniversalStorage.prototype.removeUniversalItem = function (key) {\n    this.cookies.remove(key, {\n      path: '/'\n    });\n  };\n  UniversalStorage.prototype.setItem = function (key, value) {\n    this.setLocalItem(key, value);\n    // keys take the shape:\n    //  1. `${ProviderPrefix}.${userPoolClientId}.${username}.${tokenType}\n    //  2. `${ProviderPrefix}.${userPoolClientId}.LastAuthUser\n    var tokenType = key.split('.').pop();\n    var sessionTokenTypes = ['LastAuthUser', 'accessToken',\n    // refreshToken originates on the client, but SSR pages won't fail when this expires\n    // Note: the new `accessToken` will also be refreshed on the client (since Amplify doesn't set server-side cookies)\n    'refreshToken',\n    // Required for CognitoUserSession\n    'idToken'\n    // userData is used when `Auth.currentAuthenticatedUser({ bypassCache: false })`.\n    // Can be persisted to speed up calls to `Auth.currentAuthenticatedUser()`\n    // 'userData',\n    // Ignoring clockDrift on the server for now, but needs testing\n    // 'clockDrift',\n    ];\n\n    if (sessionTokenTypes.includes(tokenType !== null && tokenType !== void 0 ? tokenType : '')) {\n      this.setUniversalItem(key, value, {\n        expires: new Date(Date.now() + ONE_YEAR_IN_MS)\n      });\n    }\n  };\n  UniversalStorage.prototype.setLocalItem = function (key, value) {\n    this.store[key] = value;\n  };\n  UniversalStorage.prototype.setUniversalItem = function (key, value, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.cookies.set(key, value, __assign(__assign({}, options), {\n      path: '/',\n      // `httpOnly` cannot be set via JavaScript: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#JavaScript_access_using_Document.cookie\n      sameSite: true,\n      // Allow unsecure requests to http://localhost:3000/ when in development.\n      secure: isBrowser && window.location.hostname === 'localhost' ? false : true\n    }));\n  };\n  return UniversalStorage;\n}();\nexport { UniversalStorage };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","Cookies","browserOrNode","isBrowser","ONE_YEAR_IN_MS","UniversalStorage","context","cookies","store","window","localStorage","create","req","headers","cookie","getAll","defineProperty","get","entries","enumerable","configurable","clear","_this","Array","from","map","_","key","forEach","removeItem","getItem","getLocalItem","getUniversalItem","index","keys","removeLocalItem","removeUniversalItem","remove","path","setItem","value","setLocalItem","tokenType","split","pop","sessionTokenTypes","includes","setUniversalItem","expires","Date","now","options","set","sameSite","secure","location","hostname"],"sources":["C:/Users/geun/amplify-app/node_modules/@aws-amplify/core/lib-esm/UniversalStorage/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport Cookies from 'universal-cookie';\nimport { browserOrNode } from '../JS';\nvar isBrowser = browserOrNode().isBrowser;\nvar ONE_YEAR_IN_MS = 365 * 24 * 60 * 60 * 1000;\nvar UniversalStorage = /** @class */ (function () {\n    function UniversalStorage(context) {\n        if (context === void 0) { context = {}; }\n        this.cookies = new Cookies();\n        this.store = isBrowser ? window.localStorage : Object.create(null);\n        this.cookies = context.req\n            ? new Cookies(context.req.headers.cookie)\n            : new Cookies();\n        Object.assign(this.store, this.cookies.getAll());\n    }\n    Object.defineProperty(UniversalStorage.prototype, \"length\", {\n        get: function () {\n            return Object.entries(this.store).length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    UniversalStorage.prototype.clear = function () {\n        var _this = this;\n        Array.from(new Array(this.length))\n            .map(function (_, i) { return _this.key(i); })\n            .forEach(function (key) { return _this.removeItem(key); });\n    };\n    UniversalStorage.prototype.getItem = function (key) {\n        return this.getLocalItem(key);\n    };\n    UniversalStorage.prototype.getLocalItem = function (key) {\n        return Object.prototype.hasOwnProperty.call(this.store, key)\n            ? this.store[key]\n            : null;\n    };\n    UniversalStorage.prototype.getUniversalItem = function (key) {\n        return this.cookies.get(key);\n    };\n    UniversalStorage.prototype.key = function (index) {\n        return Object.keys(this.store)[index];\n    };\n    UniversalStorage.prototype.removeItem = function (key) {\n        this.removeLocalItem(key);\n        this.removeUniversalItem(key);\n    };\n    UniversalStorage.prototype.removeLocalItem = function (key) {\n        delete this.store[key];\n    };\n    UniversalStorage.prototype.removeUniversalItem = function (key) {\n        this.cookies.remove(key, {\n            path: '/',\n        });\n    };\n    UniversalStorage.prototype.setItem = function (key, value) {\n        this.setLocalItem(key, value);\n        // keys take the shape:\n        //  1. `${ProviderPrefix}.${userPoolClientId}.${username}.${tokenType}\n        //  2. `${ProviderPrefix}.${userPoolClientId}.LastAuthUser\n        var tokenType = key.split('.').pop();\n        var sessionTokenTypes = [\n            'LastAuthUser',\n            'accessToken',\n            // refreshToken originates on the client, but SSR pages won't fail when this expires\n            // Note: the new `accessToken` will also be refreshed on the client (since Amplify doesn't set server-side cookies)\n            'refreshToken',\n            // Required for CognitoUserSession\n            'idToken',\n            // userData is used when `Auth.currentAuthenticatedUser({ bypassCache: false })`.\n            // Can be persisted to speed up calls to `Auth.currentAuthenticatedUser()`\n            // 'userData',\n            // Ignoring clockDrift on the server for now, but needs testing\n            // 'clockDrift',\n        ];\n        if (sessionTokenTypes.includes(tokenType !== null && tokenType !== void 0 ? tokenType : '')) {\n            this.setUniversalItem(key, value, {\n                expires: new Date(Date.now() + ONE_YEAR_IN_MS),\n            });\n        }\n    };\n    UniversalStorage.prototype.setLocalItem = function (key, value) {\n        this.store[key] = value;\n    };\n    UniversalStorage.prototype.setUniversalItem = function (key, value, options) {\n        if (options === void 0) { options = {}; }\n        this.cookies.set(key, value, __assign(__assign({}, options), { path: '/', \n            // `httpOnly` cannot be set via JavaScript: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#JavaScript_access_using_Document.cookie\n            sameSite: true, \n            // Allow unsecure requests to http://localhost:3000/ when in development.\n            secure: isBrowser && window.location.hostname === 'localhost' ? false : true }));\n    };\n    return UniversalStorage;\n}());\nexport { UniversalStorage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}